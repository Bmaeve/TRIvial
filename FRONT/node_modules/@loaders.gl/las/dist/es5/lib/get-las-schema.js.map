{"version":3,"file":"get-las-schema.js","names":["getLASSchema","lasHeader","attributes","metadataMap","makeMetadataFromLasHeader","schema","deduceMeshSchema","Map","set","pointsOffset","toString","pointsFormatId","pointsStructSize","pointsCount","JSON","stringify","scale","offset","maxs","undefined","mins","totalToRead","totalRead","versionAsString","isCompressed"],"sources":["../../../src/lib/get-las-schema.ts"],"sourcesContent":["import {Schema, MeshAttributes, deduceMeshSchema} from '@loaders.gl/schema';\nimport type {LASHeader} from './las-types';\n\n/**\n * Gets schema from PLY header\n * @param lasHeader\n * @param metadata\n * @returns Schema\n */\nexport function getLASSchema(lasHeader: LASHeader, attributes: MeshAttributes): Schema {\n  const metadataMap = makeMetadataFromLasHeader(lasHeader);\n  const schema = deduceMeshSchema(attributes, metadataMap);\n  return schema;\n}\n\n/**\n * Make arrow like schema metadata by LASHeader properties\n * @param lasHeader\n * @returns\n */\nexport function makeMetadataFromLasHeader(lasHeader: LASHeader): Map<string, string> {\n  const metadataMap = new Map();\n  metadataMap.set('las_pointsOffset', lasHeader.pointsOffset.toString(10));\n  metadataMap.set('las_pointsFormatId', lasHeader.pointsFormatId.toString(10));\n  metadataMap.set('las_pointsStructSize', lasHeader.pointsStructSize.toString(10));\n  metadataMap.set('las_pointsCount', lasHeader.pointsCount.toString(10));\n  metadataMap.set('las_scale', JSON.stringify(lasHeader.scale));\n  metadataMap.set('las_offset', JSON.stringify(lasHeader.offset));\n  if (lasHeader.maxs !== undefined) {\n    metadataMap.set('las_maxs', JSON.stringify(lasHeader.maxs));\n  }\n  if (lasHeader.mins !== undefined) {\n    metadataMap.set('las_mins', JSON.stringify(lasHeader.mins));\n  }\n  metadataMap.set('las_totalToRead', lasHeader.totalToRead.toString(10));\n  metadataMap.set('las_pointsFortotalReadmatId', lasHeader.totalRead.toString(10));\n  if (lasHeader.versionAsString !== undefined) {\n    metadataMap.set('las_versionAsString', lasHeader.versionAsString);\n  }\n  if (lasHeader.isCompressed !== undefined) {\n    metadataMap.set('las_isCompressed', lasHeader.isCompressed.toString());\n  }\n  return metadataMap;\n}\n"],"mappings":";;;;;;;AAAA;AASO,SAASA,YAAY,CAACC,SAAoB,EAAEC,UAA0B,EAAU;EACrF,IAAMC,WAAW,GAAGC,yBAAyB,CAACH,SAAS,CAAC;EACxD,IAAMI,MAAM,GAAG,IAAAC,wBAAgB,EAACJ,UAAU,EAAEC,WAAW,CAAC;EACxD,OAAOE,MAAM;AACf;;AAOO,SAASD,yBAAyB,CAACH,SAAoB,EAAuB;EACnF,IAAME,WAAW,GAAG,IAAII,GAAG,EAAE;EAC7BJ,WAAW,CAACK,GAAG,CAAC,kBAAkB,EAAEP,SAAS,CAACQ,YAAY,CAACC,QAAQ,CAAC,EAAE,CAAC,CAAC;EACxEP,WAAW,CAACK,GAAG,CAAC,oBAAoB,EAAEP,SAAS,CAACU,cAAc,CAACD,QAAQ,CAAC,EAAE,CAAC,CAAC;EAC5EP,WAAW,CAACK,GAAG,CAAC,sBAAsB,EAAEP,SAAS,CAACW,gBAAgB,CAACF,QAAQ,CAAC,EAAE,CAAC,CAAC;EAChFP,WAAW,CAACK,GAAG,CAAC,iBAAiB,EAAEP,SAAS,CAACY,WAAW,CAACH,QAAQ,CAAC,EAAE,CAAC,CAAC;EACtEP,WAAW,CAACK,GAAG,CAAC,WAAW,EAAEM,IAAI,CAACC,SAAS,CAACd,SAAS,CAACe,KAAK,CAAC,CAAC;EAC7Db,WAAW,CAACK,GAAG,CAAC,YAAY,EAAEM,IAAI,CAACC,SAAS,CAACd,SAAS,CAACgB,MAAM,CAAC,CAAC;EAC/D,IAAIhB,SAAS,CAACiB,IAAI,KAAKC,SAAS,EAAE;IAChChB,WAAW,CAACK,GAAG,CAAC,UAAU,EAAEM,IAAI,CAACC,SAAS,CAACd,SAAS,CAACiB,IAAI,CAAC,CAAC;EAC7D;EACA,IAAIjB,SAAS,CAACmB,IAAI,KAAKD,SAAS,EAAE;IAChChB,WAAW,CAACK,GAAG,CAAC,UAAU,EAAEM,IAAI,CAACC,SAAS,CAACd,SAAS,CAACmB,IAAI,CAAC,CAAC;EAC7D;EACAjB,WAAW,CAACK,GAAG,CAAC,iBAAiB,EAAEP,SAAS,CAACoB,WAAW,CAACX,QAAQ,CAAC,EAAE,CAAC,CAAC;EACtEP,WAAW,CAACK,GAAG,CAAC,6BAA6B,EAAEP,SAAS,CAACqB,SAAS,CAACZ,QAAQ,CAAC,EAAE,CAAC,CAAC;EAChF,IAAIT,SAAS,CAACsB,eAAe,KAAKJ,SAAS,EAAE;IAC3ChB,WAAW,CAACK,GAAG,CAAC,qBAAqB,EAAEP,SAAS,CAACsB,eAAe,CAAC;EACnE;EACA,IAAItB,SAAS,CAACuB,YAAY,KAAKL,SAAS,EAAE;IACxChB,WAAW,CAACK,GAAG,CAAC,kBAAkB,EAAEP,SAAS,CAACuB,YAAY,CAACd,QAAQ,EAAE,CAAC;EACxE;EACA,OAAOP,WAAW;AACpB"}