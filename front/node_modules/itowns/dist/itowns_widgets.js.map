{"version":3,"file":"itowns_widgets.js","mappings":"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","sources":["webpack://itowns/webpack/universalModuleDefinition","webpack://itowns/./src/Utils/gui/Widget.js","webpack://itowns/./src/Utils/gui/Navigation.js","webpack://itowns/./src/Utils/gui/Minimap.js","webpack://itowns/./src/Utils/gui/Scale.js","webpack://itowns/./src/Utils/gui/Searchbar.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"itowns_widgets\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"itowns_widgets\"] = factory();\n\telse\n\t\troot[\"itowns_widgets\"] = factory();\n})(self, () => {\nreturn ","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classPrivateFieldSet from \"@babel/runtime/helpers/classPrivateFieldSet\";\nimport _classPrivateFieldGet from \"@babel/runtime/helpers/classPrivateFieldGet\";\n\nfunction _classPrivateFieldInitSpec(obj, privateMap, value) { _checkPrivateRedeclaration(obj, privateMap); privateMap.set(obj, value); }\n\nfunction _checkPrivateRedeclaration(obj, privateCollection) { if (privateCollection.has(obj)) { throw new TypeError(\"Cannot initialize the same private elements twice on an object\"); } }\n\nvar _display = /*#__PURE__*/new WeakMap();\n\n/**\n * An interface that stores common methods for all specific widgets.\n *\n * @hideconstructor\n */\nvar Widget = /*#__PURE__*/function () {\n  function Widget(view) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var defaultOptions = arguments.length > 2 ? arguments[2] : undefined;\n\n    _classCallCheck(this, Widget);\n\n    _classPrivateFieldInitSpec(this, _display, {\n      writable: true,\n      value: void 0\n    });\n\n    this.parentElement = options.parentElement || view.domElement;\n    this.position = options.position || defaultOptions.position;\n\n    if (!['top-left', 'top-right', 'bottom-left', 'bottom-right', 'top', 'bottom', 'left', 'right'].includes(this.position)) {\n      console.warn('\\'position\\' optional parameter for \\'Widget\\' constructor is not a valid option. ' + \"It will be set to '\".concat(defaultOptions.position, \"'.\"));\n      this.position = defaultOptions.position;\n    } // ---------- CREATE A DomElement WITH id, classes AND style RELEVANT TO THE WIDGET PROPERTIES : ----------\n    // Create a div containing minimap widget and add it to its specified parent.\n\n\n    this.domElement = document.createElement('div');\n    this.parentElement.appendChild(this.domElement); // Size widget according to options.\n\n    this.domElement.style.width = \"\".concat(options.width || options.size || defaultOptions.width, \"px\");\n    this.domElement.style.height = \"\".concat(options.height || options.size || defaultOptions.height, \"px\"); // Position widget according to options.\n\n    var positionArray = this.position.split('-');\n    this.domElement.classList.add(\"\".concat(positionArray[0], \"-widget\"));\n\n    if (positionArray[1]) {\n      this.domElement.classList.add(\"\".concat(positionArray[1], \"-widget\"));\n    } else {\n      // If only one position parameter was given, center the domElement on the other axis.\n      // TODO : at this stage, offsetWidth and offsetHeight do no include borders. This should be worked around.\n      switch (positionArray[0]) {\n        case 'top':\n        case 'bottom':\n          this.domElement.style.left = \"calc(50% - \".concat(this.domElement.offsetWidth / 2, \"px)\");\n          break;\n\n        case 'left':\n        case 'right':\n          this.domElement.style.top = \"calc(50% - \".concat(this.domElement.offsetHeight / 2, \"px)\");\n          break;\n\n        default:\n          break;\n      }\n    } // Translate widget div according to optional translate parameter.\n\n\n    if (options.translate) {\n      this.domElement.style.transform = \"translate(\".concat(options.translate.x || 0, \"px, \").concat(options.translate.y || 0, \"px)\");\n    } // Prevent triggering `GlobeControls` and `PlanarControls` mouse or pointer events when clicking the search bar.\n    // For example, this prevents triggering an animated travel when double-clicking search bar in a `GlobeView`.\n\n\n    this.domElement.addEventListener('pointerdown', function (e) {\n      e.stopPropagation();\n    });\n    this.domElement.addEventListener('mousedown', function (e) {\n      e.stopPropagation();\n    });\n  }\n  /**\n   * Change the widget style `display` property so that the widget becomes visible.\n   */\n\n\n  _createClass(Widget, [{\n    key: \"show\",\n    value: function show() {\n      this.domElement.style.display = _classPrivateFieldGet(this, _display);\n    }\n    /**\n     * Change the widget style `display` property so that the widget becomes invisible.\n     */\n\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      _classPrivateFieldSet(this, _display, window.getComputedStyle(this.domElement).display);\n\n      this.domElement.style.display = 'none';\n    }\n  }]);\n\n  return Widget;\n}();\n\nexport default Widget;","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _classPrivateFieldSet from \"@babel/runtime/helpers/classPrivateFieldSet\";\nimport _classPrivateFieldGet from \"@babel/runtime/helpers/classPrivateFieldGet\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _classPrivateMethodInitSpec(obj, privateSet) { _checkPrivateRedeclaration(obj, privateSet); privateSet.add(obj); }\n\nfunction _classPrivateFieldInitSpec(obj, privateMap, value) { _checkPrivateRedeclaration(obj, privateMap); privateMap.set(obj, value); }\n\nfunction _checkPrivateRedeclaration(obj, privateCollection) { if (privateCollection.has(obj)) { throw new TypeError(\"Cannot initialize the same private elements twice on an object\"); } }\n\nfunction _classPrivateMethodGet(receiver, privateSet, fn) { if (!privateSet.has(receiver)) { throw new TypeError(\"attempted to get private field on non-instance\"); } return fn; }\n\nimport { VIEW_EVENTS } from \"../../Core/View\";\nimport Widget from \"./Widget\";\nvar DEFAULT_OPTIONS = {\n  displayCompass: true,\n  display3DToggle: true,\n  displayZoomIn: true,\n  displayZoomOut: true,\n  animationDuration: 500,\n  position: 'bottom-left',\n  direction: 'column'\n};\nvar DEFAULT_BUTTONS = {\n  compass: {\n    id: 'compass',\n    content: '',\n    info: 'Rotate the camera to face North',\n    parentId: 'widgets'\n  },\n  toggle3D: {\n    id: '3d-button',\n    content: '3D',\n    info: 'Tilt the camera'\n  },\n  zoomIn: {\n    id: 'zoom-in-button',\n    content: '<span class=\"widget-zoom-button-logo\"></span>',\n    info: 'Zoom in',\n    parentId: 'zoom-button-bar'\n  },\n  zoomOut: {\n    id: 'zoom-out-button',\n    content: '<span id=\"zoom-out-logo\" class=\"widget-zoom-button-logo\"></span>',\n    info: 'Zoom out',\n    parentId: 'zoom-button-bar'\n  }\n};\n/**\n * A widget menu manager for navigation.\n *\n * To use it, you need to link the widgets' stylesheet to your html webpage. This stylesheet is included in\n * [itowns bundles](https://github.com/iTowns/itowns/releases) if you downloaded them, or it can be found in\n * `node_modules/itowns/examples/css` if you installed iTowns with npm. Otherwise, it can be found at\n * [this link](https://raw.githubusercontent.com/iTowns/itowns/master/examples/css/widgets.css). See\n * [this example](http://www.itowns-project.org/itowns/examples/#widgets_navigation) for more details.\n *\n * @extends Widget\n *\n * @property {HTMLElement}          domElement      An html div containing all navigation widgets.\n * @property {HTMLElement}          parentElement   The parent HTML container of `this.domElement`.\n * @property {HTMLButtonElement}    compass         The HTML button for the compass.\n * @property {HTMLButtonElement}    toggle3D        The HTML button for the 3D/2D toggle button.\n * @property {HTMLButtonElement}    zoomIn          The HTML button for the zoom-in button.\n * @property {HTMLButtonElement}    zoomOut         The HTML button for the zoom-out button.\n *\n * @example\n * // Create a Navigation widget in the bottom-right corner of an iTowns view domElement\n * const navigation = new Navigation(view, { position: 'bottom-right' };\n *\n * // Change the tooltip for the compass :\n * navigation.compass.title = 'new tooltip';\n *\n * // Change the method ran when clicking zoom-in button :\n * function newMethod() {\n *     // do something\n * }\n * navigation.zoomIn.onclick = newMethod;\n */\n\nvar _view = /*#__PURE__*/new WeakMap();\n\nvar _action = /*#__PURE__*/new WeakSet();\n\nvar _addDefaultButton = /*#__PURE__*/new WeakSet();\n\nvar Navigation = /*#__PURE__*/function (_Widget) {\n  _inherits(Navigation, _Widget);\n\n  var _super = _createSuper(Navigation);\n\n  /**\n   * @param   {GlobeView}     view                                    The iTowns view the navigation should be linked\n                                                                      * to. For the moment, only `{@link GlobeView}`\n                                                                      * is supported.\n   * @param   {Object}        options                                 The navigation menu optional configuration.\n   * @param   {HTMLElement}   [options.parentElement=view.domElement] The parent HTML container of the div which\n                                                                      * contains navigation widgets.\n   * @param   {boolean}       [options.displayCompass=true]           Whether the compass widget should be displayed.\n   * @param   {boolean}       [options.display3DToggle=true]          Whether the navigation should include a widget\n                                                                      * to toggle between top and oblique view.\n   * @param   {boolean}       [options.displayZoomIn=true]            Whether the zoom-in widget should be displayed.\n   * @param   {boolean}       [options.displayZoomOut=true]           Whether the zoom-out widget should be displayed.\n   * @param   {number}        [options.animationDuration=500]         The duration of travel animations, when clicking\n                                                                      * navigation widgets.\n   * @param   {string}        [options.position='bottom-left']        Defines which corner of the `parentElement` the\n                                                                      * navigation menu should be displayed to.\n                                                                      * Possible values are `top-left`, `top-right`,\n                                                                      * `bottom-left` and `bottom-right`. If the input\n                                                                      * value does not match one of these, it will be\n                                                                      * defaulted to `bottom-left`.\n   * @param   {string}        [options.direction='column']            Whether the navigation menu should expand\n                                                                      * horizontally or vertically. Possible values\n                                                                      * are `column` and `row`. If the input value\n                                                                      * does not match one of these, it will be\n                                                                      * defaulted to `column`.\n   * @param   {Object}        [options.translate]                     An optional translation of the navigation menu.\n   * @param   {number}        [options.translate.x=0]                 The navigation menu translation along the page\n                                                                      * x-axis.\n   * @param   {number}        [options.translate.y=0]                 The navigation menu translation along the page\n                                                                      * y-axis.\n   */\n  function Navigation(view) {\n    var _options$displayCompa, _options$display3DTog, _options$displayZoomI, _options$displayZoomO;\n\n    var _this;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Navigation);\n\n    // ---------- BUILD PROPERTIES ACCORDING TO DEFAULT OPTIONS AND OPTIONS PASSED IN PARAMETERS : ----------\n    // Check if the view is supported.\n    if (!view.isGlobeView) {\n      throw new Error('\\'Navigation\\' plugin only supports \\'GlobeView\\'. Therefore, the \\'view\\' parameter must be a ' + '\\'GlobeView\\'.');\n    } // `top`, `bottom`, `left` and `right` values for `position` option are not relevant for navigation widget.\n\n\n    if (['top', 'bottom', 'left', 'right'].includes(options.position)) {\n      console.warn('\\'position\\' optional parameter for \\'Navigation\\' is not a valid option. ' + \"It will be set to '\".concat(DEFAULT_OPTIONS.position, \"'.\"));\n      options.position = DEFAULT_OPTIONS.position;\n    }\n\n    _this = _super.call(this, view, options, DEFAULT_OPTIONS);\n\n    _classPrivateMethodInitSpec(_assertThisInitialized(_this), _addDefaultButton);\n\n    _classPrivateMethodInitSpec(_assertThisInitialized(_this), _action);\n\n    _classPrivateFieldInitSpec(_assertThisInitialized(_this), _view, {\n      writable: true,\n      value: void 0\n    });\n\n    _classPrivateFieldSet(_assertThisInitialized(_this), _view, view);\n\n    _this.direction = options.direction || DEFAULT_OPTIONS.direction;\n\n    if (!['column', 'row'].includes(_this.direction)) {\n      console.warn('\\'direction\\' optional parameter for \\'Navigation\\' constructor is not a valid option. ' + \"It will be set to '\".concat(DEFAULT_OPTIONS.direction, \"'.\"));\n      _this.direction = DEFAULT_OPTIONS.direction;\n    }\n\n    _this.animationDuration = options.animationDuration === undefined ? DEFAULT_OPTIONS.animationDuration : options.animationDuration; // ---------- CREATE A DomElement WITH id AND classes RELEVANT TO THE WIDGET PROPERTIES : ----------\n    // Create a div containing all widgets and add it to its specified parent.\n\n    _this.domElement.id = 'widgets-navigation'; // Position widget div according to options.\n\n    _this.domElement.classList.add(\"\".concat(_this.direction, \"-widget\")); // ---------- CREATE THE DEFAULT WIDGETS IF NOT HIDDEN (COMPASS, 3D AND ZOOM BUTTONS) : ----------\n    // Add a compass widget if requested.\n\n\n    if ((_options$displayCompa = options.displayCompass) !== null && _options$displayCompa !== void 0 ? _options$displayCompa : DEFAULT_OPTIONS.displayCompass) {\n      _this.compass = _classPrivateMethodGet(_assertThisInitialized(_this), _addDefaultButton, _addDefaultButton2).call(_assertThisInitialized(_this), DEFAULT_BUTTONS.compass, function () {\n        _classPrivateMethodGet(_assertThisInitialized(_this), _action, _action2).call(_assertThisInitialized(_this), {\n          heading: 0,\n          tilt: 89.5\n        });\n      }); // Manage compass rotation when the view's camera is moved.\n\n      view.addEventListener(VIEW_EVENTS.CAMERA_MOVED, function (event) {\n        _this.compass.style.transform = \"rotate(\".concat(-event.heading, \"deg)\");\n      });\n    } // Add a 3D toggle button if requested.\n\n\n    if ((_options$display3DTog = options.display3DToggle) !== null && _options$display3DTog !== void 0 ? _options$display3DTog : DEFAULT_OPTIONS.display3DToggle) {\n      _this.toggle3D = _classPrivateMethodGet(_assertThisInitialized(_this), _addDefaultButton, _addDefaultButton2).call(_assertThisInitialized(_this), DEFAULT_BUTTONS.toggle3D, function () {\n        _classPrivateMethodGet(_assertThisInitialized(_this), _action, _action2).call(_assertThisInitialized(_this), {\n          tilt: _classPrivateFieldGet(_assertThisInitialized(_this), _view).controls.getTilt() < 89 ? 89.5 : 40\n        });\n      }); // Manage button content toggle when the view's camera is moved.\n\n      view.addEventListener(VIEW_EVENTS.CAMERA_MOVED, function (event) {\n        _this.toggle3D.innerHTML = event.tilt < 89 ? '2D' : '3D';\n      });\n    } // Add a zoom-in button if requested.\n\n\n    if ((_options$displayZoomI = options.displayZoomIn) !== null && _options$displayZoomI !== void 0 ? _options$displayZoomI : DEFAULT_OPTIONS.displayZoomIn) {\n      _this.zoomIn = _classPrivateMethodGet(_assertThisInitialized(_this), _addDefaultButton, _addDefaultButton2).call(_assertThisInitialized(_this), DEFAULT_BUTTONS.zoomIn, function () {\n        _classPrivateMethodGet(_assertThisInitialized(_this), _action, _action2).call(_assertThisInitialized(_this), {\n          zoom: Math.min(20, _classPrivateFieldGet(_assertThisInitialized(_this), _view).controls.getZoom() + 1)\n        });\n      });\n    } // Add a zoom-out button if requested.\n\n\n    if ((_options$displayZoomO = options.displayZoomOut) !== null && _options$displayZoomO !== void 0 ? _options$displayZoomO : DEFAULT_OPTIONS.displayZoomOut) {\n      _this.zoomOut = _classPrivateMethodGet(_assertThisInitialized(_this), _addDefaultButton, _addDefaultButton2).call(_assertThisInitialized(_this), DEFAULT_BUTTONS.zoomOut, function () {\n        _classPrivateMethodGet(_assertThisInitialized(_this), _action, _action2).call(_assertThisInitialized(_this), {\n          zoom: Math.max(3, _classPrivateFieldGet(_assertThisInitialized(_this), _view).controls.getZoom() - 1)\n        });\n      });\n    }\n\n    return _this;\n  }\n  /**\n   *\n   * @param   {string}    id              The unique id the created button should be given.\n   * @param   {string}    [content='']    An HTML string defining the content of the button.\n   * @param   {string}    [title='']      An HTML string defining information on the button. This string will be\n                                          * displayed in a tooltip when hovering the button.\n   * @param   {function}  [onclick] The method that should be executed when the button is clicked on.\n   * @param   {string}    [parentId]      The unique id of a button bar in which the created button should be added.\n                                          * A button bar is a group which contains one or several buttons. All\n                                          * buttons created with Navigation are in a button bar. If the given id does\n                                          * not match an already existing button bar, a new button bar will be created\n                                          * with this id. If no id is given, a button bar will be created with no id.\n                                          * The later case can be useful for creating isolated buttons.\n   *\n   * @returns {HTMLButtonElement}     The created button.\n   */\n\n\n  _createClass(Navigation, [{\n    key: \"addButton\",\n    value: function addButton(id) {\n      var _this2 = this;\n\n      var content = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      var title = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n      var onclick = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function () {};\n      var parentId = arguments.length > 4 ? arguments[4] : undefined;\n      var buttonBar = document.getElementById(parentId);\n\n      if (!buttonBar) {\n        buttonBar = this.addButtonBar(parentId);\n      }\n\n      var button = document.createElement('button');\n      button.className = 'widget-button';\n      button.id = id;\n      button.innerHTML = content;\n      button.title = title;\n      button.onclick = onclick;\n      buttonBar.appendChild(button); // The buttons must not be focused using tab key.\n\n      button.tabIndex = -1; // When releasing the mouse after clicking the button, we give the focus back to the view. Therefore, we can use\n      // key events on the view without having to click the view to grant it focus.\n\n      window.addEventListener('pointerup', function () {\n        if (document.activeElement === button) {\n          _classPrivateFieldGet(_this2, _view).domElement.focus();\n        }\n      });\n      return button;\n    }\n  }, {\n    key: \"addButtonBar\",\n    value: function addButtonBar(id) {\n      var buttonBar = document.createElement('div');\n      buttonBar.className = 'widget-button-bar';\n\n      if (id) {\n        buttonBar.id = id;\n      }\n\n      this.domElement.appendChild(buttonBar);\n      return buttonBar;\n    }\n  }]);\n\n  return Navigation;\n}(Widget);\n\nfunction _action2(params) {\n  params.time = this.animationDuration;\n  return _classPrivateFieldGet(this, _view).controls.lookAtCoordinate(params);\n}\n\nfunction _addDefaultButton2(settings, onclick) {\n  return this.addButton(settings.id, settings.content, settings.info, onclick, settings.parentId);\n}\n\nexport default Navigation;","import _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport Coordinates from \"../../Core/Geographic/Coordinates\";\nimport { MAIN_LOOP_EVENTS } from \"../../Core/MainLoop\";\nimport PlanarView from \"../../Core/Prefab/PlanarView\";\nimport { CAMERA_TYPE } from \"../../Renderer/Camera\";\nimport Widget from \"./Widget\";\nvar DEFAULT_OPTIONS = {\n  minScale: 1 / 500000,\n  maxScale: 1 / 5E8,\n  zoomRatio: 1 / 30,\n  width: 150,\n  height: 150,\n  position: 'bottom-left'\n};\n/**\n * A widget for minimap\n *\n * To use it, you need to link the widgets' stylesheet to your html webpage. This stylesheet is included in\n * [itowns bundles](https://github.com/iTowns/itowns/releases) if you downloaded them, or it can be found in\n * `node_modules/itowns/examples/css` if you installed iTowns with npm. Otherwise, it can be found at\n * [this link](https://raw.githubusercontent.com/iTowns/itowns/master/examples/css/widgets.css). See\n * [this example](http://www.itowns-project.org/itowns/examples/#widgets_minimap) for more details.\n *\n * @extends Widget\n *\n * @property    {HTMLElement}   domElement      An html div containing the minimap.\n * @property    {HTMLElement}   parentElement   The parent HTML container of `this.domElement`.\n */\n\nvar Minimap = /*#__PURE__*/function (_Widget) {\n  _inherits(Minimap, _Widget);\n\n  var _super = _createSuper(Minimap);\n\n  /**\n   * @param   {GlobeView}             view                                    The iTowns view the minimap should be\n                                                                              * linked to. Only {@link GlobeView} is\n                                                                              * supported at the moment.\n   * @param   {ColorLayer}            layer                                   The {@link ColorLayer} that should be\n                                                                              * displayed on the minimap.\n   * @param   {Object}                [options]                               The minimap optional configuration.\n   * @param   {HTMLElement}           [options.parentElement=view.domElement] The parent HTML container of the div\n                                                                              * which contains minimap widgets.\n   * @param   {number}                [options.size]                          The size of the minimap. It is a number\n                                                                              * that describes both width and height\n                                                                              * in pixels of the minimap.\n   * @param   {number}                [options.width=150]                     The width in pixels of the minimap.\n   * @param   {number}                [options.height=150]                    The height in pixels of the minimap.\n   * @param   {string}                [options.position='bottom-left']        Defines which position within the\n                                                                              * `parentElement` the minimap should be\n                                                                              * displayed to. Possible values are\n                                                                              * `top`, `bottom`, `left`, `right`,\n                                                                              * `top-left`, `top-right`, `bottom-left`\n                                                                              * and `bottom-right`. If the input value\n                                                                              * does not match one of these, it will\n                                                                              * be defaulted to `bottom-left`.\n   * @param   {Object}                [options.translate]                     An optional translation of the minimap.\n   * @param   {number}                [options.translate.x=0]                 The minimap translation along the page\n                                                                              * x-axis.\n   * @param   {number}                [options.translate.y=0]                 The minimap translation along the page\n                                                                              * y-axis.\n   * @param   {HTMLElement|string}    [options.cursor]                        An html element or an HTML string\n                                                                              * describing a cursor showing minimap\n                                                                              * view camera target position at the\n                                                                              * center of the minimap.\n   * @param   {number}                [options.minScale=1/2000]               The minimal scale the minimap can reach.\n   * @param   {number}                [options.maxScale=1/1_250_000]          The maximal scale the minimap can reach.\n   * @param   {number}                [options.zoomRatio=1/30]                The ratio between minimap camera zoom\n                                                                              * and view camera zoom.\n   * @param   {number}                [options.pitch=0.28]                    The screen pixel pitch, used to compute\n                                                                              * view and minimap scale.\n   */\n  function Minimap(view, layer) {\n    var _this;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, Minimap);\n\n    // ---------- BUILD PROPERTIES ACCORDING TO DEFAULT OPTIONS AND OPTIONS PASSED IN PARAMETERS : ----------\n    if (!view.isGlobeView) {\n      throw new Error('\\'Minimap\\' plugin only supports \\'GlobeView\\'. Therefore, the \\'view\\' parameter must be a ' + '\\'GlobeView\\'.');\n    }\n\n    if (!layer.isColorLayer) {\n      throw new Error('\\'layer\\' parameter form \\'Minimap\\' constructor should be a \\'ColorLayer\\'.');\n    }\n\n    _this = _super.call(this, view, options, DEFAULT_OPTIONS);\n    _this.minScale = options.minScale || DEFAULT_OPTIONS.minScale;\n    _this.maxScale = options.maxScale || DEFAULT_OPTIONS.maxScale; // TODO : it could be interesting to be able to specify a method as zoomRatio parameter. This method could\n    //  return a zoom ratio from the scale of the minimap.\n\n    _this.zoomRatio = options.zoomRatio || DEFAULT_OPTIONS.zoomRatio; // ---------- this.domElement SETTINGS SPECIFIC TO MINIMAP : ----------\n\n    _this.domElement.id = 'widgets-minimap'; // Display a cursor at the center of the minimap, if requested.\n\n    if (options.cursor) {\n      // Wrap cursor domElement inside a div to center it in minimap.\n      var cursorWrapper = document.createElement('div');\n      cursorWrapper.id = 'cursor-wrapper';\n\n      _this.domElement.appendChild(cursorWrapper); // Add specified cursor to its wrapper.\n\n\n      if (typeof options.cursor === 'string') {\n        cursorWrapper.innerHTML = options.cursor;\n      } else if (options.cursor instanceof HTMLElement) {\n        cursorWrapper.appendChild(options.cursor);\n      }\n    } // ---------- CREATE A MINIMAP View AND DISPLAY DATA PASSED IN Layer PARAMETER : ----------\n\n\n    _this.view = new PlanarView(_this.domElement, layer.source.extent, {\n      camera: {\n        type: CAMERA_TYPE.ORTHOGRAPHIC\n      },\n      placement: layer.source.extent,\n      // TODO : the default placement should be the view extent for ortho camera\n      noControls: true,\n      maxSubdivisionLevel: view.tileLayer.maxSubdivisionLevel,\n      disableFocusOnStart: true\n    });\n\n    _this.view.addLayer(layer); // TODO : should this promise be returned by constructor so that user can use it ?\n    // Prevent the minimap domElement to get focus when clicked, and prevent click event to be propagated to the\n    // main view controls.\n\n\n    _this.domElement.addEventListener('pointerdown', function (event) {\n      event.preventDefault();\n    }); // Store minimap view camera3D in constant for code convenience.\n\n\n    var camera3D = _this.view.camera.camera3D; // ---------- UPDATE MINIMAP VIEW WHEN UPDATING THE MAIN VIEW : ----------\n    // The minimal and maximal value the minimap camera3D zoom can reach in order to stay in the scale limits.\n\n    var initialScale = _this.view.getScale(options.pitch);\n\n    var minZoom = camera3D.zoom * _this.maxScale / initialScale;\n    var maxZoom = camera3D.zoom * _this.minScale / initialScale; // Coordinates used to transform position vectors from the main view CRS to the minimap view CRS.\n\n    var mainViewCoordinates = new Coordinates(view.referenceCrs);\n    var viewCoordinates = new Coordinates(_this.view.referenceCrs);\n    var targetPosition = view.controls.getCameraTargetPosition();\n    view.addFrameRequester(MAIN_LOOP_EVENTS.AFTER_RENDER, function () {\n      // Update minimap camera zoom\n      var distance = view.camera.camera3D.position.distanceTo(targetPosition);\n      var scale = view.getScaleFromDistance(options.pitch, distance);\n      camera3D.zoom = _this.zoomRatio * maxZoom * scale / _this.minScale;\n      camera3D.zoom = Math.min(Math.max(camera3D.zoom, minZoom), maxZoom);\n      camera3D.updateProjectionMatrix(); // Update minimap camera position.\n\n      mainViewCoordinates.setFromVector3(view.controls.getCameraTargetPosition());\n      mainViewCoordinates.as(_this.view.referenceCrs, viewCoordinates);\n      camera3D.position.x = viewCoordinates.x;\n      camera3D.position.y = viewCoordinates.y;\n      camera3D.updateMatrixWorld(true);\n\n      _this.view.notifyChange(camera3D);\n    });\n    return _this;\n  }\n\n  return _createClass(Minimap);\n}(Widget);\n\nexport default Minimap;","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { CONTROL_EVENTS } from \"../../Controls/GlobeControls\";\nimport { GLOBE_VIEW_EVENTS } from \"../../Core/Prefab/GlobeView\";\nimport { PLANAR_CONTROL_EVENT } from \"../../Controls/PlanarControls\";\nimport { VIEW_EVENTS } from \"../../Core/View\";\nimport Widget from \"./Widget\";\nvar DEFAULT_OPTIONS = {\n  width: 200,\n  height: 30,\n  position: 'bottom-left'\n};\n/**\n * A widget for scale\n *\n * To use it, you need to link the widgets' stylesheet to your html webpage. This stylesheet is included in\n * [itowns bundles](https://github.com/iTowns/itowns/releases) if you downloaded them, or it can be found in\n * `node_modules/itowns/examples/css` if you installed iTowns with npm. Otherwise, it can be found at\n * [this link](https://raw.githubusercontent.com/iTowns/itowns/master/examples/css/widgets.css). See\n * [this example](http://www.itowns-project.org/itowns/examples/#widgets_scale) for more details.\n *\n * @extends Widget\n *\n * @property    {HTMLElement}   domElement      An html div containing the scale.\n * @property    {HTMLElement}   parentElement   The parent HTML container of `this.domElement`.\n */\n\nvar Scale = /*#__PURE__*/function (_Widget) {\n  _inherits(Scale, _Widget);\n\n  var _super = _createSuper(Scale);\n\n  /**\n   * @param   {View}                  view                                    The iTowns view the scale should be\n                                                                              * linked to. If it is a\n                                                                              * {@link PlanarView} or a\n                                                                              * {@link GlobeView}, the scale will be\n                                                                              * automatically updated. Otherwise, user\n                                                                              * will need to implement the update\n                                                                              * automation using the `Scale.update`\n                                                                              * method.\n   * @param   {Object}                [options]                               The scale optional configuration.\n   * @param   {HTMLElement}           [options.parentElement=view.domElement] The parent HTML container of the div\n                                                                              * which contains scale widgets.\n   * @param   {number}                [options.width=200]                     The width in pixels of the scale.\n   * @param   {number}                [options.height=30]                     The height in pixels of the scale.\n   * @param   {string}                [options.position='bottom-left']        Defines which position within the\n                                                                              * `parentElement` the scale should be\n                                                                              * displayed to. Possible values are\n                                                                              * `top`, `bottom`, `left`, `right`,\n                                                                              * `top-left`, `top-right`, `bottom-left`\n                                                                              * and `bottom-right`. If the input value\n                                                                              * does not match one of these, it will\n                                                                              * be defaulted to `bottom-left`.\n   * @param   {Object}                [options.translate]                     An optional translation of the scale.\n   * @param   {number}                [options.translate.x=0]                 The scale translation along the page\n                                                                              * x-axis.\n   * @param   {number}                [options.translate.y=0]                 The scale translation along the page\n                                                                              * y-axis.\n   */\n  function Scale(view) {\n    var _this;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Scale);\n\n    // ---------- BUILD PROPERTIES ACCORDING TO DEFAULT OPTIONS AND OPTIONS PASSED IN PARAMETERS : ----------\n    _this = _super.call(this, view, options, DEFAULT_OPTIONS); // ---------- this.domElement SETTINGS SPECIFIC TO SCALE : ----------\n\n    _this.domElement.id = 'widgets-scale';\n    _this.view = view; // Initialize the text content of the scale, which will later be updated by a numerical value.\n\n    _this.domElement.innerHTML = 'Scale';\n    _this.width = options.width || DEFAULT_OPTIONS.width;\n\n    if (_this.view.isGlobeView) {\n      _this.view.addEventListener(GLOBE_VIEW_EVENTS.GLOBE_INITIALIZED, function () {\n        _this.update();\n      });\n\n      _this.view.controls.addEventListener(CONTROL_EVENTS.RANGE_CHANGED, function () {\n        _this.update();\n      });\n    } else if (_this.view.isPlanarView) {\n      _this.view.addEventListener(VIEW_EVENTS.INITIALIZED, function () {\n        _this.update();\n      });\n\n      _this.view.addEventListener(PLANAR_CONTROL_EVENT.MOVED, function () {\n        _this.update();\n      });\n    } else {\n      console.warn('The \\'view\\' linked to scale widget is neither a \\'GlobeView\\' nor a \\'PlanarView\\'. The ' + 'scale wont automatically update. You can implement its update automation using \\'Scale.update\\' ' + 'method.');\n    }\n\n    return _this;\n  }\n\n  _createClass(Scale, [{\n    key: \"addEventListeners\",\n    value: function addEventListeners() {}\n    /**\n     * Update the scale size and content according to view camera position.\n     */\n\n  }, {\n    key: \"update\",\n    value: function update() {\n      // Calculate the rounded metric distance which matches the scale width in pixels.\n      var metricDistance = Math.round(this.view.getPixelsToMeters(this.width));\n      var digit = Math.pow(10, metricDistance.toString().length - 1);\n      metricDistance = Math.round(metricDistance / digit) * digit;\n      var pixelDistance = this.view.getMetersToPixels(metricDistance);\n      var unit = 'm';\n\n      if (metricDistance >= 1000) {\n        metricDistance /= 1000;\n        unit = 'km';\n      }\n\n      this.domElement.innerHTML = \"\".concat(metricDistance, \" \").concat(unit);\n      this.domElement.style.width = \"\".concat(pixelDistance, \"px\");\n    }\n  }]);\n\n  return Scale;\n}(Widget);\n\nexport default Scale;","import _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _classPrivateFieldGet from \"@babel/runtime/helpers/classPrivateFieldGet\";\nimport _classPrivateFieldSet from \"@babel/runtime/helpers/classPrivateFieldSet\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _classPrivateFieldInitSpec(obj, privateMap, value) { _checkPrivateRedeclaration(obj, privateMap); privateMap.set(obj, value); }\n\nfunction _checkPrivateRedeclaration(obj, privateCollection) { if (privateCollection.has(obj)) { throw new TypeError(\"Cannot initialize the same private elements twice on an object\"); } }\n\nimport Fetcher from \"../../Provider/Fetcher\";\nimport Widget from \"./Widget\";\nvar DEFAULT_OPTIONS = {\n  width: 300,\n  height: 38,\n  position: 'top',\n  maxSuggestionNumber: 10,\n  fontSize: 16,\n  placeholder: 'Search location'\n};\n\nfunction addActive(htmlElements, index) {\n  var _htmlElements$index;\n\n  if (!htmlElements) {\n    return index;\n  }\n\n  removeAllActives(htmlElements);\n\n  if (index >= htmlElements.length) {\n    index = 0;\n  } else if (index < 0) {\n    index = htmlElements.length - 1;\n  }\n\n  (_htmlElements$index = htmlElements[index]) === null || _htmlElements$index === void 0 ? void 0 : _htmlElements$index.classList.add('active');\n  return index;\n}\n\nfunction removeAllActives(htmlElements) {\n  for (var i = 0; i < htmlElements.length; i++) {\n    htmlElements[i].classList.remove('active');\n  }\n}\n\nfunction eraseSuggestionList(form) {\n  while (form.children.length > 1) {\n    form.removeChild(form.lastChild);\n  }\n}\n/**\n * A widget for searchbar\n *\n * To use it, you need to link the widgets' stylesheet to your html webpage. This stylesheet is included in\n * [itowns bundles](https://github.com/iTowns/itowns/releases) if you downloaded them, or it can be found in\n * `node_modules/itowns/examples/css` if you installed iTowns with npm. Otherwise, it can be found at\n * [this link](https://raw.githubusercontent.com/iTowns/itowns/master/examples/css/widgets.css). See\n * [this example](http://www.itowns-project.org/itowns/examples/#widgets_searchbar) for more details.\n *\n * @extends Widget\n *\n * @property    {HTMLElement}   domElement      An html div containing the searchbar.\n * @property    {HTMLElement}   parentElement   The parent HTML container of `this.domElement`.\n */\n\n\nvar _onSelected = /*#__PURE__*/new WeakMap();\n\nvar Searchbar = /*#__PURE__*/function (_Widget) {\n  _inherits(Searchbar, _Widget);\n\n  var _super = _createSuper(Searchbar);\n\n  /**\n   * @param   {View}          view                                    The iTowns view the searchbar should be linked\n                                                                      * to.\n   *\n   * @param   {Object}        geocodingOptions                        Configuration for geocoding.\n   * @param   {URL}           geocodingOptions.url                    The URL of a geocoding service that should be\n                                                                      * used to build suggestions.\n   * @param   {function}      geocodingOptions.parser                 A method to parse fetched results from geocoding\n                                                                      * url into a Map object. For each entry of this\n                                                                      * Map, the key must be a string that will be\n                                                                      * displayed as the html content of each\n                                                                      * suggestion bellow the searchbar. The value\n                                                                      * associated to the key is whatever the user\n                                                                      * wants. The value is the parameter that is\n                                                                      * passed to the `onSelected` method (specified\n                                                                      * in another `geocodingOptions` parameter).\n   * @param   {function}      [geocodingOptions.onSelected]           A method which describes what should be done\n                                                                      * when user selects a location (by clicking or\n                                                                      * hitting enter on a suggestion). The only\n                                                                      * parameter of this method is the value mapped\n                                                                      * with `geocodingOptions.parser` method.\n   *\n   * @param   {Object}        [options]                               The searchbar optional configuration.\n   * @param   {HTMLElement}   [options.parentElement=view.domElement] The parent HTML container of the div which\n                                                                      * contains searchbar widgets.\n   * @param   {number}        [options.size]                          The size of the searchbar. It is a number that\n                                                                      * describes both width and height in pixels of\n                                                                      * the searchbar.\n   * @param   {number}        [options.width=300]                     The width in pixels of the searchbar.\n   * @param   {number}        [options.height=38]                     The height in pixels of the searchbar.\n   * @param   {string}        [options.position='top']                Defines which position within the\n                                                                      * `parentElement` the searchbar should be\n                                                                      * displayed to. Possible values are `top`,\n                                                                      * `bottom`, `left`, `right`, `top-left`,\n                                                                      * `top-right`, `bottom-left` and `bottom-right`.\n                                                                      * If the input value does not match one of\n                                                                      * these, it will be defaulted to `top`.\n   * @param   {Object}        [options.translate]                     An optional translation of the searchbar.\n   * @param   {number}        [options.translate.x=0]                 The searchbar translation along the page x-axis.\n   * @param   {number}        [options.translate.y=0]                 The searchbar translation along the page y-axis.\n   * @param   {number}        [options.fontSize=16]                   The font size in pixel of the searchbar content.\n   * @param   {number}        [options.maxSuggestionNumber=10]        The maximum number of suggestions that should\n                                                                      * appear under the searchbar.\n   * @param   {string}        [options.placeholder='Search location'] The placeholder that appears in the searchbar\n                                                                      * when nothing has yet been typed.\n   */\n  function Searchbar(view, geocodingOptions) {\n    var _geocodingOptions$onS;\n\n    var _this;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, Searchbar);\n\n    // ---------- BUILD PROPERTIES ACCORDING TO DEFAULT OPTIONS AND OPTIONS PASSED IN PARAMETERS : ----------\n    _this = _super.call(this, view, options, DEFAULT_OPTIONS); // Check if `geocodingOptions` parameter was correctly specified.\n\n    _classPrivateFieldInitSpec(_assertThisInitialized(_this), _onSelected, {\n      writable: true,\n      value: void 0\n    });\n\n    if (!geocodingOptions || !geocodingOptions.url || !geocodingOptions.parser || typeof geocodingOptions.parser !== 'function') {\n      throw new Error('\\'geocodingOptions\\' parameter for \\'Searchbar\\' constructor is not a valid option. Please refer to ' + 'the documentation.');\n    }\n\n    _classPrivateFieldSet(_assertThisInitialized(_this), _onSelected, (_geocodingOptions$onS = geocodingOptions.onSelected) !== null && _geocodingOptions$onS !== void 0 ? _geocodingOptions$onS : function () {}); // ---------- this.domElement SETTINGS SPECIFIC TO SEARCHBAR : ----------\n\n\n    _this.domElement.id = 'widgets-searchbar';\n    _this.domElement.style.height = 'auto';\n    var form = document.createElement('form');\n    form.setAttribute('autocomplete', 'off');\n    form.id = 'searchbar-autocompletion-form';\n\n    _this.domElement.appendChild(form);\n\n    var input = document.createElement('input');\n    input.setAttribute('type', 'text');\n    input.setAttribute('name', 'mySearch');\n    input.setAttribute('placeholder', options.placeholder || DEFAULT_OPTIONS.placeholder);\n    input.style.height = \"\".concat(options.height || options.size || DEFAULT_OPTIONS.height, \"px\");\n    input.style.fontSize = \"\".concat(options.fontSize || DEFAULT_OPTIONS.fontSize, \"px\");\n    form.appendChild(input); // currentFocus variable stores the index of the suggestions that is focused by user, either with mouse or arrow\n    // keys.\n\n    var currentFocus; // ----------  BUILD AUTOCOMPLETION SUGGESTIONS LIST WHEN TYPING THE SEARCHBAR INPUT : ----------\n\n    input.addEventListener('input', function () {\n      var value = input.value; // Close any already opened list of autocompleted values\n\n      eraseSuggestionList(form);\n      currentFocus = -1;\n\n      if (!value) {\n        return false;\n      }\n\n      geocodingOptions.url.searchParams.set('text', value);\n      Fetcher.json(geocodingOptions.url).then(function (geocodingResult) {\n        var result = geocodingOptions.parser(geocodingResult);\n        var i = 0;\n        result.forEach(function (info, location) {\n          // Stop looping through the map if enough location have been proceeded.\n          if (i === Math.min(result.size, options.maxSuggestionNumber || DEFAULT_OPTIONS.maxSuggestionNumber)) {\n            return;\n          }\n\n          var mapIndex = i;\n          i++;\n          var index = location.toUpperCase().indexOf(value.toUpperCase());\n\n          if (index > -1) {\n            var autocompleteItem = document.createElement('div');\n            autocompleteItem.style.minHeight = input.style.height;\n            autocompleteItem.style.fontSize = \"\".concat(options.fontSize || DEFAULT_OPTIONS.fontSize, \"px\"); // Make the matching letters bold.\n\n            var start = location.slice(0, index);\n            var bold = location.slice(index, index + value.length);\n            var end = location.slice(index + value.length, location.length);\n            autocompleteItem.innerHTML = \"<p>\".concat(start, \"<strong>\").concat(bold, \"</strong>\").concat(end, \"</p>\"); // Store the current location value as an attribute of autocompleteItem div.\n\n            autocompleteItem.setAttribute('location', location);\n            form.appendChild(autocompleteItem); // eslint-disable-next-line no-loop-func\n\n            autocompleteItem.addEventListener('mouseover', function () {\n              removeAllActives(form.children);\n              currentFocus = mapIndex;\n              autocompleteItem.classList.add('active');\n            });\n            autocompleteItem.addEventListener('click', function () {\n              _classPrivateFieldGet(_assertThisInitialized(_this), _onSelected).call(_assertThisInitialized(_this), info);\n\n              input.value = autocompleteItem.getAttribute('location');\n              eraseSuggestionList(form);\n            });\n          }\n        });\n      });\n    }); // ---------- MANAGE KEYBOARD INTERACTIONS ON AUTOCOMPLETION SUGGESTIONS : ----------\n    // When searchbar is positioned at the bottom of the screen (therefore is a flex with `column-reverse`\n    // direction, we must exchange up and down arrow actions.\n\n    var topOrBottom = (options.position || DEFAULT_OPTIONS.position).includes('top') ? 1 : -1;\n    input.addEventListener('keydown', function (event) {\n      event.stopPropagation();\n      var completionSuggestions = form.getElementsByTagName('div');\n\n      switch (event.code) {\n        case 'Escape':\n          eraseSuggestionList(form);\n          input.value = '';\n          view.domElement.focus();\n          break;\n\n        case 'ArrowDown':\n          event.preventDefault();\n          currentFocus = addActive(completionSuggestions, currentFocus + topOrBottom);\n          break;\n\n        case 'ArrowUp':\n          event.preventDefault();\n          currentFocus = addActive(completionSuggestions, currentFocus - topOrBottom);\n          break;\n\n        case 'Enter':\n          event.preventDefault();\n\n          if (completionSuggestions[Math.max(currentFocus, 0)]) {\n            completionSuggestions[Math.max(currentFocus, 0)].click();\n            view.domElement.focus();\n          }\n\n          break;\n\n        default:\n          break;\n      }\n    }); // ---------- MANAGE FOCUS AND ACTIVE SUGGESTION WHEN USER ENTERS OR LEAVES THE SEARCHBAR : ----------\n    // User clicks the searchbar.\n\n    input.addEventListener('focus', function () {\n      form.classList.add('focus');\n    }); // User clicks out of the searchbar.\n\n    input.addEventListener('blur', function () {\n      form.classList.remove('focus');\n      removeAllActives(form.children);\n    }); // Cursor leaves the searchbar.\n\n    form.addEventListener('mouseleave', function () {\n      removeAllActives(form.children);\n      currentFocus = -1;\n    });\n    return _this;\n  }\n\n  return _createClass(Searchbar);\n}(Widget);\n\nexport default Searchbar;"],"names":["root","factory","exports","module","define","amd","self","_classPrivateFieldInitSpec","obj","privateMap","value","privateCollection","has","TypeError","_checkPrivateRedeclaration","set","_display","WeakMap","Widget","view","options","arguments","length","undefined","defaultOptions","this","writable","parentElement","domElement","position","includes","console","warn","concat","document","createElement","appendChild","style","width","size","height","positionArray","split","classList","add","left","offsetWidth","top","offsetHeight","translate","transform","x","y","addEventListener","e","stopPropagation","key","display","window","getComputedStyle","_classPrivateMethodInitSpec","privateSet","_classPrivateMethodGet","receiver","fn","DEFAULT_OPTIONS","displayCompass","display3DToggle","displayZoomIn","displayZoomOut","animationDuration","direction","DEFAULT_BUTTONS","id","content","info","parentId","_view","_action","WeakSet","_addDefaultButton","_action2","params","time","controls","lookAtCoordinate","_addDefaultButton2","settings","onclick","addButton","_Widget","Navigation","Derived","hasNativeReflectConstruct","_super","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","_isNativeReflectConstruct","result","Super","NewTarget","constructor","apply","_options$displayCompa","_options$display3DTog","_options$displayZoomI","_options$displayZoomO","_this","isGlobeView","Error","compass","heading","tilt","event","toggle3D","getTilt","innerHTML","zoomIn","zoom","Math","min","getZoom","zoomOut","max","_this2","title","buttonBar","getElementById","addButtonBar","button","className","tabIndex","activeElement","focus","minScale","maxScale","zoomRatio","Minimap","layer","isColorLayer","cursor","cursorWrapper","HTMLElement","PlanarView","source","extent","camera","type","placement","noControls","maxSubdivisionLevel","tileLayer","disableFocusOnStart","addLayer","preventDefault","camera3D","initialScale","getScale","pitch","minZoom","maxZoom","mainViewCoordinates","Coordinates","referenceCrs","viewCoordinates","targetPosition","getCameraTargetPosition","addFrameRequester","distance","distanceTo","scale","getScaleFromDistance","updateProjectionMatrix","setFromVector3","as","updateMatrixWorld","notifyChange","Scale","update","isPlanarView","metricDistance","round","getPixelsToMeters","digit","pow","toString","pixelDistance","getMetersToPixels","unit","maxSuggestionNumber","fontSize","placeholder","addActive","htmlElements","index","_htmlElements$index","removeAllActives","i","remove","eraseSuggestionList","form","children","removeChild","lastChild","_onSelected","Searchbar","geocodingOptions","_geocodingOptions$onS","url","parser","onSelected","setAttribute","currentFocus","input","searchParams","Fetcher","then","geocodingResult","forEach","location","mapIndex","toUpperCase","indexOf","autocompleteItem","minHeight","start","slice","bold","end","getAttribute","topOrBottom","completionSuggestions","getElementsByTagName","code","click"],"sourceRoot":""}